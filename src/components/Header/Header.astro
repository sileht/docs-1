---
import { AiOutlineDashboard } from 'react-icons/ai';
import { FaGithub } from 'react-icons/fa';
import { SiSlack, SiStatuspage } from 'react-icons/si';
import HeaderLink from './HeaderLink.astro';
import { HiOutlineDocumentArrowUp } from 'react-icons/hi2';
import SidebarToggle from './SidebarToggle';
import ThemeToggleButton from './ThemeToggleButton';
import Search from '../Search/Search.astro';
---

<header>
	<nav class="nav-wrapper" aria-label={'Top'}>
		<SidebarToggle client:idle />
		<div dir="ltr" lang="en" class="logo flex">
			<ul>
				<li>
					<a
						class="astro"
						href="https://docs.mergify.com/"
						aria-label="Back to Mergify Docs homepage"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							cursor="pointer"
							version="1.0"
							preserveAspectRatio="xMidYMid meet"
							viewBox="0 0 1300 210"
							color="inherit"
						>
							<text
								stroke="none"
								id="logo-text-mergify"
								x="550px"
								y="156.499969px"
								fill="currentColor"
							>
								Mergify
							</text>
							<text id="logo-text-docs" x="1050px" y="156.499969px" fill="currentColor">
								| Docs
							</text>
							<g
								visibility="visible"
								id="logo"
								stroke="none"
								transform="translate(0.000000,210.000000) scale(0.100000,-0.100000)"
								fill="#53a9db"
							>
								<path
									d="M898,2090 c-229,-37 -425,-136 -588,-300 c-141,-140 -234,-305 -283,-499 c-30,-123 -30,-359 0,-482 c49,-194 142,-359 283,-499 c140,-141 305,-234 499,-283 c123,-30 359,-30 482,0 c194,49 359,142 499,283 c141,140 234,305 283,499 c30,123 30,359 0,482 c-49,194 -142,359 -283,499 c-139,140 -306,235 -494,281 c-93,23 -309,33 -398,19 m-160,-594 c15,-8 35,-23 45,-34 c17,-19 21,-19 65,-5 c57,18 132,11 177,-16 c33,-19 34,-19 96,0 c172,54 294,24 352,-84 c20,-39 22,-57 25,-256 l3,-213 l34,-34 c60,-60 67,-136 18,-202 c-89,-120 -273,-59 -273,92 c0,51 27,109 56,120 c13,5 15,34 12,212 l-3,206 l-28,24 c-32,27 -84,31 -152,11 l-39,-12 l3,-215 c3,-209 3,-214 26,-232 c58,-45 67,-150 18,-209 c-94,-112 -273,-54 -273,88 c0,53 11,83 44,113 l26,25 l0,208 c0,194 -1,208 -20,227 c-20,20 -63,26 -106,14 c-11,-3 -29,-21 -39,-40 c-10,-20 -27,-40 -37,-45 c-16,-9 -18,-26 -18,-190 c0,-149 2,-181 15,-185 c28,-11 55,-69 55,-120 c0,-151 -184,-212 -273,-92 c-49,66 -42,142 18,203 l35,34 l0,161 l0,161 l-35,34 c-77,77 -64,190 29,246 c37,22 106,25 144,5"
									id=""
									visibility="visible"></path>
								<path
									d="M610,1414.5 c-59,-59 -26,-152 54,-152 c48,0 65,8 81,41 c33,62 2,125 -67,136 c-32,5 -41,1 -68,-25"
									visibility="visible"
									id="path1"></path>
								<path
									d="M605,805 c-36,-36 -34,-88 5,-127 c27,-26 36,-30 68,-25 c43,7 82,46 82,83 c0,32 -25,80 -45,88 c-37,14 -86,6 -110,-19"
									visibility="visible"
									id="path1"></path>
								<path
									d="M986,799 c-49,-58 -20,-134 56,-146 c32,-5 41,-1 68,25 c61,61 26,152 -59,152 c-32,0 -44,-6 -65,-31"
									visibility="visible"
									id="path1"></path>
								<path
									d="M1382,823 c-18,-7 -42,-57 -42,-87 c0,-37 39,-76 82,-83 c32,-5 41,-1 68,25 c60,61 26,153 -57,151 c-21,0 -44,-3 -51,-6"
									visibility="visible"
									id="path1"></path>
							</g>
						</svg>
					</a>
				</li>
			</ul>
		</div>
		<div class="nav-buttons">
			<HeaderLink href="https://dashboard.mergify.com" icon={AiOutlineDashboard}>
				Dashboard
			</HeaderLink>
			<HeaderLink href="https://slack.mergify.com" icon={SiSlack}>Slack Community</HeaderLink>
			<HeaderLink href="https://github.com/Mergifyio/mergify/discussions" icon={FaGithub}>
				Discussions
			</HeaderLink>
			<HeaderLink href="https://changelog.mergify.com" icon={HiOutlineDocumentArrowUp}>
				Changelog
			</HeaderLink>
			<HeaderLink href="https://status.mergify.com" icon={SiStatuspage}>Status</HeaderLink>
		</div>
		<Search />
		<ThemeToggleButton
			client:visible
			labels={{ useLight: 'Use light theme', useDark: 'Use dark theme' }}
			isInsideHeader={true}
		/>
	</nav>
</header>

<style lang="scss">
	header {
		position: fixed;
		left: 0;
		top: 0;
		right: 0;
		height: var(--theme-navbar-height);
		z-index: 11;
		padding: 2rem 0;
		background-color: var(--theme-navbar-bg);
		display: flex;
		align-items: center;
		justify-content: left;
		overflow: hidden;
	}

	ul,
	li {
		all: inherit;
		flex-grow: 0;
	}

	.nav-wrapper {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		width: 100%;
		padding-inline: var(--min-spacing-inline);
	}

	.nav-buttons {
		display: flex;
		margin: 0 auto;
		gap: 0.5em;
	}

	/* If the device is likely to show a scrollbar gutter, reserve space for it */
	@media (hover: hover) {
		.nav-wrapper {
			max-width: calc(100vw - 1.1rem);
		}
	}

	.logo {
		display: flex;
		justify-content: flex-start;
		font-size: 1rem;
		flex-shrink: 0;
		font-weight: 600;
		line-height: 1;
		text-decoration: none;
		gap: 0.5em;

		#logo-text-mergify,
		#logo-text-docs {
			font-family: Poppins;
			letter-spacing: -1 (null);
			text-anchor: middle;
			font-variant: normal;
			font-stretch: normal;
			font-size: 140px;
			color: var(--theme-text);
		}

		#logo-text-docs {
			font-weight: 100;
		}
	}

	:global([dir='rtl']) .logo {
		justify-content: flex-end;
	}

	.logo a {
		padding: 0.5em 0.25em;
		margin: -0.5em -0.25em;
	}

	.logo svg {
		height: 40px;
		display: block;
	}

	.logo a {
		transition: transform 180ms ease-out;
	}

	.logo a:focus:not(:focus-visible) {
		outline: none;
	}

	.logo h1 {
		font: inherit;
		color: inherit;
		margin: 0;
	}

	@media (max-width: 87em) {
		.nav-buttons {
			display: none !important;
		}
	}

	@media (min-width: 20em) {
		.docs {
			display: inherit;
			max-width: 80px;
		}
	}

	@media (min-width: 23.5em) {
		.docs {
			max-width: none;
		}
		.nav-wrapper {
			gap: 1rem;
		}
	}

	@media (min-width: 50em) {
		.astro {
			width: auto;
		}
	}

	@media (forced-colors: active) {
		.text {
			fill: LinkText;
		}
		.docs-path {
			fill: ActiveText;
		}
	}
</style>
